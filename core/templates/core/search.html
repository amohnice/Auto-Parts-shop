{% extends 'base.html' %}

{% block title %}Search{% endblock %}

{% block content %}
<div class="container">
    <h1>Search Parts</h1>

    <!-- Search Form -->
    <form method="get" action="{% url 'search' %}">
        <div class="form-group">
            <label for="id_query">Search:</label>
            {{ form.query }}
        </div>

        <h3>Filters</h3>
        <div class="form-group">
            {{ filter_form.as_p }}
        </div>

        <button type="submit" class="btn btn-primary">Search</button>
    </form>

    <h2>Results</h2>
    <ul class="list-group">
        {% for result in results %}
            <li class="list-group-item">
                <a href="{% url 'part_detail' result.id %}">{{ result.name }}</a> -
                {{ result.price }} {{ result.currency }}
            </li>
        {% empty %}
            <li class="list-group-item">No parts found.</li>
        {% endfor %}
    </ul>
</div>

<!-- Autocomplete Script -->
<script>
    $(function() {
        $("#id_query").autocomplete({
            source: "{% url 'autocomplete' %}",
            minLength: 2,  // Start showing suggestions after typing 2 characters
        });
    });
</script>

{% endblock %}
